import{w as T}from"./with-props-Db1jVSdq.js";import{l as e,r}from"./chunk-HA7DTUK3-DItZKCSJ.js";import{a as W,k as _,g as H,s as Q,b as g,o as k,c as E,d as I,e as A,i as B,w as q,f,p as G,h as J,j as K}from"./utils-CxXd-veg.js";const b=({keyName:s,isSelected:n,onClick:l,disabled:o})=>e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",name:s,onClick:l,checked:n,disabled:o}),e.jsx("label",{children:s})]}),S=({toggleSubject:s,onClick:n})=>e.jsxs("div",{children:[e.jsxs("button",{onClick:n,children:["Toggle All ",s]}),e.jsxs("button",{onClick:n,children:["Randomize ",s]})]}),U=({accidentalType:s,activeMode:n,activeKeys:l,setActiveKeys:o,setAccidentalType:a})=>e.jsxs("div",{className:"column",children:[e.jsx(S,{toggleSubject:"Keys",onClick:()=>{const i=H(s,n);l.length===i.length?o([]):o(i)}}),W.map(i=>e.jsxs("div",{children:[e.jsx("input",{type:"radio",id:i.name,name:i.name,value:i.value,checked:s===i.value,onClick:()=>{a(i.value),o(l.filter(t=>t.accidental===i.value))}}),e.jsx("label",{htmlFor:i.name,children:i.name})]},i.name)),e.jsxs("div",{children:[e.jsx("input",{type:"radio",id:"all keys",name:"all keys",value:0,checked:s===0,onClick:()=>a(0)}),e.jsx("label",{htmlFor:"all keys",children:"All keys"})]},"all keys"),_.map(i=>{const t=Q(i,s,n);if(t)return e.jsx(b,{disabled:t.name.includes("/"),keyName:`${t.name}${g[t.accidental||0]}`,isSelected:!!l.find(c=>c.name===t.name&&c.accidental===t.accidental),onClick:()=>{k(t,l,o,c=>c.name===t.name&&c.accidental===t.accidental)}},`${t.name}${g[t.accidental||0]}`)})]}),V=({activeChordTypes:s,setActiveChordTypes:n})=>e.jsxs("div",{className:"column",children:[e.jsx(S,{toggleSubject:"Types",onClick:()=>{s.length>=0&&s.length<E.length?n(E):n([])}}),E.map(l=>e.jsx(b,{keyName:l,isSelected:s.includes(l),onClick:()=>{k(l,s,n)}},l))]}),X=({activeQualities:s,activeChordType:n,setActiveQualities:l})=>e.jsxs("div",{className:"column",children:[e.jsx(S,{toggleSubject:"Qualities",onClick:()=>{s.length<I[n].length?l(I[n].chords):l([])}}),I[n].chords.map(o=>e.jsx(b,{keyName:o,isSelected:s.includes(o),onClick:()=>{k(o,s,l)}},o))]}),Y=({activeChordType:s,activeInversions:n,setActiveInversions:l})=>e.jsxs("div",{className:"column",children:[e.jsx(S,{toggleSubject:"Inversions",onClick:()=>{n.length<A[s].length?l(A[s].map((o,a)=>a)):l([])}}),A[s].map((o,a)=>e.jsx(b,{keyName:B[a],isSelected:n.includes(a),onClick:()=>k(a,n,l)},B[a]))]}),Z=()=>e.jsxs("div",{className:"column",children:["TODOS:",e.jsxs("ul",{children:[e.jsx("li",{children:"Catchall: If something's broken it's because I haven't felt inspired to fix it"}),e.jsx("li",{children:"Make the site look pretty"}),e.jsx("li",{children:"Allow for selecting triads AND sevenths (and 9ths? 11ths?)"}),e.jsx("li",{children:"Keep sound off upon chord re-generation"}),e.jsx("li",{children:"Roman numeral notation"}),e.jsx("li",{children:"Modes?"}),e.jsx("li",{children:"when displaying flats and sharps, prefer the sharp or flat of an enharmonic key, allowing for all keys to be selected"}),e.jsx("li",{children:"Bug: if a flat key is still selected when switching to sharps, it is still included in the list of potential chord roots"}),e.jsx("li",{children:"Have an alert if no keys/qualities/inversions get selected upon chord generation"}),e.jsx("li",{children:"Sine is the only waveform available, despite the lies the dropdown displays."}),e.jsx("li",{children:"Select a random assortment of each chord option"})]})]}),v=({activeChord:s})=>{var i,t,c,x,m;const[n,l]=r.useState(!0),[o,a]=r.useState(!0);return e.jsxs("div",{children:[e.jsx("div",{className:"chord"}),e.jsx("button",{onClick:()=>{l(j=>!j)},children:"Toggle notes"}),e.jsx("br",{}),e.jsx("span",{className:"chordLetter",children:(s==null?void 0:s.tonic)&&`${s==null?void 0:s.tonic.name}${g[s.tonic.accidental||0]}`}),(s==null?void 0:s.symbol)&&e.jsx("sup",{children:s==null?void 0:s.symbol}),e.jsxs("div",{className:"fraction",children:[((i=s==null?void 0:s.inversion)==null?void 0:i[0])&&((t=s==null?void 0:s.inversion)==null?void 0:t[1])&&e.jsxs("span",{children:[e.jsx("sup",{children:s.inversion[0]}),e.jsx("sub",{children:s.inversion[1]})]}),((c=s==null?void 0:s.inversion)==null?void 0:c[0])&&!((x=s==null?void 0:s.inversion)!=null&&x[1])&&e.jsxs("span",{children:[e.jsx("sup",{children:s.inversion[0]}),e.jsx("span",{children:" "})]})]}),n&&e.jsxs("div",{children:[(m=s==null?void 0:s.notes)==null?void 0:m.map(j=>` ${j.name}${g[j.accidental||0]} `),e.jsx("br",{}),s.tonic&&s.inversion&&s.notes?`${s.inversionName} inversion`:"Select a value from each column and click Generate Chord"]})]})},C=({activeChord:s,oscList:n,generateChord:l,clearChord:o,playChord:a,isPaused:i,isMuted:t,setIsMuted:c,setWaveform:x})=>e.jsxs("div",{children:[e.jsx("button",{id:"generateChord",onClick:l,children:"Generate Chord"}),e.jsx("button",{onClick:o,children:"Clear Chord"}),e.jsx(v,{activeChord:s}),e.jsx("br",{}),e.jsx("button",{onClick:()=>a(t),children:i?"⏵":"⏹"}),e.jsx("button",{onClick:c,children:t?"unmute":"mute"}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("span",{children:"Current waveform: "}),e.jsx("select",{name:"waveform",onChange:m=>x(m.target.value),children:q.map(m=>e.jsx("option",{value:m.toLowerCase(),children:m},m))})]})]});function ee(){const s=r.useRef(null),n=r.useRef(null);r.useEffect(()=>{s.current=new AudioContext,n.current=s.current.createGain(),n.current.connect(s.current.destination),n.current.gain.value=.1},[]);const[l,o]=r.useState([{name:"C",accidental:0}]),[a,i]=r.useState(["triad"]),[t,c]=r.useState({}),[x,m]=r.useState(["maj"]),[j,M]=r.useState([0]),[N,O]=r.useState(-1),[P]=r.useState("ionian"),[y,z]=r.useState("sine"),[h,L]=r.useState([]),[w,D]=r.useState(!1),[$,p]=r.useState(!0);r.useEffect(()=>{var u;f(h),!w&&!$&&L(((u=t.notes)==null?void 0:u.map(d=>G({freq:d.hz,audioContext:s.current,waveFormType:y,gainNode:n.current})).filter(d=>!!d))||[])},[t.notes,y]),r.useEffect(()=>{N>0?o(u=>u.filter(d=>d.accidental!==-1&&!d.isEnharmonic)):o(u=>u.filter(d=>d.accidental!==1&&!d.isEnharmonic))},[N]);const F=J(a);return e.jsxs("div",{className:"App",children:[e.jsxs("section",{className:"builder",children:[e.jsx(U,{accidentalType:N,activeMode:P,activeKeys:l,setActiveKeys:o,setAccidentalType:O}),e.jsx(V,{activeChordTypes:a,setActiveChordTypes:i}),e.jsx(X,{activeChordType:F,activeQualities:x,setActiveQualities:m}),e.jsx(Y,{activeChordType:F,activeInversions:j,setActiveInversions:M})]}),e.jsx(C,{activeChord:t,oscList:h,isPaused:$,isMuted:w,setIsMuted:()=>{w||(f(h),p(!0)),D(u=>!u)},setWaveform:u=>z(u),playChord:(u=!1)=>{var d;f(h),$?(u||L(((d=t.notes)==null?void 0:d.map(R=>G({freq:R.hz,audioContext:s.current,waveFormType:y,gainNode:n.current})).filter(R=>!!R))||[]),p(!1)):(f(h),p(!0))},clearChord:()=>{f(h),c({})},generateChord:()=>{f(h),p(!1),K({activeKeys:l,activeInversions:j,activeQualities:x,activeChordTypes:a,setActiveChord:c})}}),e.jsx(Z,{})]})}const te=T(ee);export{te as default};
