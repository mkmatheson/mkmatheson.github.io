const u=["C","D","E","F","G","A","B"],q=[[-9,3],[-8,4],[-7,5],[-6,6],[-5,7],[-4,8],[-3,9],[-2,10],[-1,11],[0,0],[-11,1],[-10,2]],y=[[{key:"B",accidental:1},{key:"C",accidental:0,modes:["ionian"]},{key:"D",accidental:-2}],[{key:"C",accidental:1,modes:["ionian"],isEnharmonic:!0,accidentalType:1},{key:"D",accidental:-1,accidentalType:-1,modes:["ionian"],isEnharmonic:!0}],[{key:"D",accidental:0,accidentalType:1,modes:["ionian"]},{key:"E",accidental:-2}],[{key:"D",accidental:1,modes:["aeolian"]},{key:"E",accidental:-1,modes:["ionian"]},{key:"F",accidental:-2}],[{key:"F",accidental:-1},{key:"E",accidental:0,accidentalType:1,modes:["ionian"]}],[{key:"E",accidental:1},{key:"F",accidental:0,accidentalType:-1,modes:["ionian"]},{key:"G",accidental:-2}],[{key:"F",accidental:1,accidentalType:1,modes:["ionian"],isEnharmonic:!0},{key:"G",accidental:-1,accidentalType:-1,modes:["ionian"],isEnharmonic:!0}],[{key:"G",accidental:0,accidentalType:1,modes:["ionian"]},{key:"F",accidental:2},{key:"A",accidental:-2}],[{key:"G",accidental:1,modes:["aeolian"]},{key:"A",accidental:-1,modes:["ionian"]},{key:"B",accidental:-3}],[{key:"A",accidental:0,accidentalType:1,modes:["ionian"]},{key:"G",accidental:2},{key:"B",accidental:-2}],[{key:"A",accidental:1,modes:["aeolian"]},{key:"B",accidental:-1,modes:["ionian"]},{key:"C",accidental:-2}],[{key:"B",accidental:0,accidentalType:1,modes:["ionian"],isEnharmonic:!0},{key:"C",accidental:-1,accidentalType:-1,modes:["ionian"],isEnharmonic:!0}]],b={key:"",accidental:0,modes:[]},H=["triad","seventh"],O={triad:{chords:["maj","min","dim","aug"],length:3},seventh:{chords:["maj","dom","min","halfDim","dim","aug"],length:4}},v={triad:[[""],["6"],["6","4"]],seventh:[["7"],["6","5"],["4","3"],["4","2"]]},A={maj:{semiToneSpacing:[4,3,4],symbol:"maj"},dom:{semiToneSpacing:[4,3,3]},min:{semiToneSpacing:[3,4,3],symbol:"m"},halfDim:{semiToneSpacing:[3,3,4],symbol:"Ã¸"},dim:{semiToneSpacing:[3,3,3],symbol:"o"},aug:{semiToneSpacing:[4,4,2],symbol:"+"}},J=[{name:"flats",value:-1},{name:"sharps",value:1}],R={"-3":"ğ„«â™­","-2":"ğ„«","-1":"â™­",0:"",1:"â™¯",2:"ğ„ª"},$={0:"root",1:"1st",2:"2nd",3:"3rd"},L=["Sine","Square","Sawtooth","Triangle","Custom"],k=n=>Math.floor(Math.random()*n),B=(n,a)=>[...a].slice(n).concat([...a].slice(0,n)),N=(n,a,i,t=e=>e.toString()===n.toString())=>{const e=a.findIndex(t);i(e!==-1?o=>[...o.slice(0,e),...o.slice(e+1)]:o=>[...o,n])},M=(n,a,i)=>{let t=n.find(e=>e.accidental===0&&!e.isEnharmonic)||b;if(!t.key)if(n.some(e=>e.isEnharmonic)){if(a===0)return{name:n.map(o=>D(o)).map(o=>`${o.name}${R[o.accidental||0]}`).join("/"),accidental:0,isEnharmonic:!0};{const e=n.find(o=>o.accidentalType===a);e&&(t=e)}}else t=n.find(e=>e.accidental===a||a===0&&e.modes&&e.modes.includes(i))||b;if(!(t.modes&&!t.modes.includes(i)||t.accidentalType&&a!==0&&t.accidentalType!==a))return D(t)},D=n=>({name:n.key,accidental:n.accidental,isEnharmonic:n.isEnharmonic}),P=({activeKeys:n,activeInversions:a,activeQualities:i,activeChordTypes:t,setActiveChord:e})=>{const o={};if(n.length>0&&a.length>0&&i.length>0&&t.length>0){const F=k(n.length),m=n[F];o.tonic=m;const g=k(t.length),j=t[g]==="triad"&&a.includes(3),p=a[k(a.filter(c=>!(j&&c===3)).sort((c,s)=>c-s).length)];o.inversionName=$[p],o.inversion=v[t[g]][p];const E=i[k(i.length)];o.symbol=A[E].symbol;let x=y.findIndex(c=>c.find(s=>s.key===m.name&&s.accidental===m.accidental));const C=u.findIndex(c=>c===m.name),T=B(C,u);let I=0;const l=[m];A[E].semiToneSpacing.slice(0,O[t[g]].length-1).forEach(c=>{var h;x=(x+c)%12,I+=2;const s=y.findIndex((d,f)=>d.find(z=>z.key===T[I]&&x===f)),r=(h=y[s])==null?void 0:h.find(d=>d.key===T[I]);r&&l.push({name:r.key,accidental:r.accidental})});let S=0;for(;S<p;){const c=l.shift();c&&l.push(c),S+=1}const G=u.findIndex(c=>c===l[0].name),K=B(G,u),w=K.findIndex(c=>c==="A");l.forEach(c=>{const r=K.findIndex(d=>d===c.name)-w<=0?0:1,h=y.findIndex(d=>d.find(f=>f.key===c.name&&c.accidental===f.accidental));c.hz=440*2**((0+q[h][r])/12)}),o.notes=l}e(o)},Q=(n,a)=>y.map(i=>M(i,n,a)).filter(i=>(i==null?void 0:i.name)&&(n===0&&!i.isEnharmonic||n!==0)),U=({freq:n=0,audioContext:a,gainNode:i,waveFormType:t})=>{if(a&&i){const e=a.createOscillator();return e.connect(i),e.type=t,e.frequency.value=n,e.start(),e}},W=n=>{n.forEach(a=>{a.stop()})},X=n=>n.includes("seventh")?"seventh":"triad";export{J as a,R as b,H as c,O as d,v as e,W as f,Q as g,X as h,$ as i,P as j,y as k,A as l,N as o,U as p,M as s,L as w};
