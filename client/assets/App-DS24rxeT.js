import{w}from"./with-props-Db1jVSdq.js";import{r as l,l as t}from"./chunk-HA7DTUK3-DItZKCSJ.js";const u=Array.from({length:6},e=>Array.from({length:16},()=>!1)),m=[{keyName:"e",octave:4},{keyName:"b",octave:3},{keyName:"g",octave:3},{keyName:"d",octave:3},{keyName:"a",octave:2},{keyName:"e",octave:2}],j=15,f=[[{key:"B",accidental:1},{key:"C",accidental:0,modes:["ionian"]},{key:"D",accidental:-2}],[{key:"C",accidental:1,modes:["ionian"],isEnharmonic:!0,accidentalType:1},{key:"D",accidental:-1,accidentalType:-1,modes:["ionian"],isEnharmonic:!0}],[{key:"D",accidental:0,accidentalType:1,modes:["ionian"]},{key:"E",accidental:-2}],[{key:"D",accidental:1,modes:["aeolian"]},{key:"E",accidental:-1,modes:["ionian"]},{key:"F",accidental:-2}],[{key:"F",accidental:-1},{key:"E",accidental:0,accidentalType:1,modes:["ionian"]}],[{key:"E",accidental:1},{key:"F",accidental:0,accidentalType:-1,modes:["ionian"]},{key:"G",accidental:-2}],[{key:"F",accidental:1,accidentalType:1,modes:["ionian"],isEnharmonic:!0},{key:"G",accidental:-1,accidentalType:-1,modes:["ionian"],isEnharmonic:!0}],[{key:"G",accidental:0,accidentalType:1,modes:["ionian"]},{key:"F",accidental:2},{key:"A",accidental:-2}],[{key:"G",accidental:1,modes:["aeolian"]},{key:"A",accidental:-1,modes:["ionian"]},{key:"B",accidental:-3}],[{key:"A",accidental:0,accidentalType:1,modes:["ionian"]},{key:"G",accidental:2},{key:"B",accidental:-2}],[{key:"A",accidental:1,modes:["aeolian"]},{key:"B",accidental:-1,modes:["ionian"]},{key:"C",accidental:-2}],[{key:"B",accidental:0,accidentalType:1,modes:["ionian"],isEnharmonic:!0},{key:"C",accidental:-1,accidentalType:-1,modes:["ionian"],isEnharmonic:!0}]],A={"-3":"ð„«â™­","-2":"ð„«","-1":"â™­",0:"",1:"â™¯",2:"ð„ª"},C=(e,n)=>[...n].slice(e).concat([...n].slice(0,e)),x=e=>Math.floor(Math.random()*e),E=(e,n)=>`${e} |-----${isNaN(n)?"-":n}-----|`,S=(e,n)=>m.map((r,c)=>{const i=c<1?r.keyName:r.keyName.toUpperCase();return E(i,e===c?n:void 0)}),k=(e,n)=>{const r=m[e],c=f.findIndex(o=>o.find(a=>a.key.toLowerCase()===r.keyName.toLowerCase()&&a.accidental===0)),i=C(c,f).map(o=>o.find(a=>a.accidental===0)||o.find(a=>a.accidental===-1)||{key:"e",accidental:0});i.push(...i),i.splice(j+1);let h=r.octave;for(let o=0;o<=n;o+=1)i[o].key.toLowerCase()==="c"&&i[o].accidental===0&&(h+=1);const y=i[n];return{string:e+1,fret:n,answer:`${y.key}${A[y.accidental||0]}${h}`}},v=()=>({stringIdx:x(m.length),fretIdx:x(j+1)}),T=()=>u.map((e,n)=>e.map((r,c)=>k(n,c))),g=()=>{const{stringIdx:e,fretIdx:n}=v(),r=k(e,n);return{matchingNotes:T().flatMap(c=>c).filter(c=>c.answer.slice(0,-1)===r.answer.slice(0,-1)),answerNote:r}},N=()=>{const{stringIdx:e,fretIdx:n}=v();return{...k(e,n),tablature:S(e,n)}},b=u.flatMap(e=>e.flatMap(n=>n)).length,F=()=>{const[e,n]=l.useState(N()),[r,c]=l.useState(!1),[i,h]=l.useState(u),y=l.useRef(null),o=l.useRef(null);return l.useEffect(()=>{const a=s=>{var d,p;s.key==="ArrowLeft"?(d=y.current)==null||d.click():s.key==="ArrowRight"&&((p=o.current)==null||p.click())};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[]),t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:["string ",e.string]}),t.jsxs("div",{children:["fret ",e.fret]}),t.jsxs("div",{children:[t.jsx("button",{ref:y,onClick:()=>c(!0),children:"Show answer"}),t.jsx("button",{ref:o,onClick:()=>{const a=i;r&&(a[e.string-1][e.fret]=!0,h(a),c(!1));let s;for(;!s;){const d=N();a[d.string-1][d.fret]||(s=d)}n(s)},children:"Reset"})]}),t.jsxs("div",{children:["Notes remaining:"," ",i.flatMap(a=>a.filter(s=>!s)).length," /"," ",b]}),t.jsx("div",{style:{minHeight:"250px"},children:r&&t.jsxs("div",{children:[t.jsx("h3",{children:e.answer}),t.jsx("div",{style:{display:"flex",justifyContent:"center"},children:t.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"left",alignItems:"start"},children:e.tablature.map((a,s)=>t.jsx("div",{children:a},`string-#${s+1}`))})})]})}),t.jsxs("div",{children:[t.jsx("div",{style:{marginLeft:2},children:i[0].map((a,s)=>t.jsx("span",{style:{padding:3},children:s}))}),i.map((a,s)=>t.jsxs("div",{children:[`${m[s].keyName} `,a.map(d=>t.jsx("span",{style:{padding:2},children:t.jsx("input",{type:"checkbox",disabled:!0,checked:d})}))]}))]})]})},I=()=>{const[e,n]=l.useState(g());return t.jsxs("div",{children:[t.jsxs("div",{children:["Where can you find ",e.answerNote.answer.slice(0,-1)," on the guitar?"]}),t.jsx("button",{onClick:()=>{n(g())},children:"Reset"}),t.jsx("div",{children:m.map((r,c)=>t.jsxs("div",{children:[c+1,":"," ",e.matchingNotes.filter(i=>i.string===c+1).map(i=>`${i.fret}`).join(", ")]}))})]})};function R(){return t.jsxs("div",{className:"App",children:[t.jsx(F,{}),t.jsx(I,{})]})}const D=w(R);export{D as default};
